<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
          padding: 0;
          margin: 0;
        }
    
        #box {
          width: 300px;
          height: 300px;
          background: orangered;
          line-height: 100px;
          text-align: center;
          margin-top: 800px;
        }
      </style>
</head>
<body>
    <div id="box">点我啊</div>
</body>
</html>
<script>
    //函数的节流
    //· 高频事件可以连续触发，但在n秒内只会执行一次，所以节流会稀释函数的执行频率
    //· 会稀释函数执行的频率,但函数会一直执行
    
    //时间戳版本(立即执行)；
    let num = 0;
    // function throttle(fn, time) {
    //   let previous = 0;
    //   return function () {
    //     let now = Date.now(); // 时间戳 
    //     if (now - previous >= time) {
    //       fn.call(this);
    //       previous = now;
    //     }
    //   }
    // }
    // function fn(){
    //     console.log(++num);
    //     console.log(this);
    // }
    // // box.onmousemove = throttle(fn, 1000);
    // window.onscroll = throttle(fn, 1000);

    //定时器版
    function throttle(fn, time) {
      let timer;
      return function () {
        if (!timer) {
          // 如果不赋值为null，这个条件不成立；
          timer = setTimeout(() => {
            timer = null;
            fn.call(this);
          }, time);
        }
      }
    }
    function fn(){
        console.log(++num);
        console.log(this);
    }
    window.onscroll = throttle(fn, 1000);

</script>